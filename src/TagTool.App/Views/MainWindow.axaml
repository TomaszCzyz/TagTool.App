<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:TagTool.App.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:userControls="clr-namespace:TagTool.App.Views.UserControls"
    mc:Ignorable="d" d:DesignWidth="1600" d:DesignHeight="900"
    x:Class="TagTool.App.Views.MainWindow"
    x:Name="RootWindow"
    Icon="/Assets/avalonia-logo.ico"
    Title="TagTool.App"
    ExtendClientAreaChromeHints="Default"
    ExtendClientAreaToDecorationsHint="True"
    ExtendClientAreaTitleBarHeightHint="-1"
    Background="{StaticResource MyLightPrimary200}">
    <Window.KeyBindings>
        <KeyBinding Gesture="Escape" Command="{Binding ResetFocusCommand}" CommandParameter="{Binding #RootWindow}" />
        <KeyBinding Gesture="Ctrl+Q" Command="{Binding FocusNextSearchTabCommand}" CommandParameter="{Binding #RootWindow}" />
    </Window.KeyBindings>
    <Window.Styles>
        <Style Selector="Border.MenuPanel">
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{StaticResource MyLightPrimary800}" />
            <Setter Property="Background" Value="{StaticResource MyLightPrimary300}" />
        </Style>
    </Window.Styles>

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*">
        <Border
            Grid.Column="0"
            Classes="MenuPanel"
            Margin="-1 -1 -1 0"
            PointerPressed="InputElement_OnPointerPressed"
            PointerReleased="InputElement_OnPointerReleased"
            PointerMoved="InputElement_OnPointerMoved">

            <userControls:MenuView />
        </Border>

        <Grid Grid.Row="1" ColumnDefinitions="Auto,*">

            <!-- left side panel -->
            <Border 
                Grid.Column="0"
                Classes="MenuPanel"
                Margin="-1">

                <Panel Width="36">

                    <!-- top items -->
                    <StackPanel Orientation="Vertical">
                        <StackPanel.Styles>
                            <Style Selector="RadioButton">
                                <Setter Property="Template">
                                    <ControlTemplate>
                                        <ToggleButton
                                            DataContext="{Binding $parent}"
                                            Background="Transparent"
                                            Padding="3"
                                            Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                            IsChecked="{Binding IsChecked, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                                    </ControlTemplate>
                                </Setter>
                            </Style>
                        </StackPanel.Styles>
                        <RadioButton Name="RadioButton1" ToolTip.Tip="Quick access to common tags" ToolTip.Placement="Right">
                            <Svg Path="/Assets/Svgs/Light/tags.svg" />
                        </RadioButton>
                        <RadioButton Name="RadioButton2" ToolTip.Tip="Ble ble" ToolTip.Placement="Right">
                            <Svg Path="/Assets/Svgs/Light/tags.svg" />
                        </RadioButton>
                        <RadioButton Name="RadioButton3" ToolTip.Tip="Another tool view" ToolTip.Placement="Right">
                            <Svg Path="/Assets/Svgs/Light/tags.svg" />
                        </RadioButton>
                    </StackPanel>

                    <!-- bottom items -->
                    <StackPanel VerticalAlignment="Bottom">
                        <Svg Path="/Assets/Svgs/Light/sun.svg" />
                        <Svg Path="/Assets/Svgs/Light/moon.svg" />
                    </StackPanel>
                </Panel>
            </Border>

            <SplitView
                Grid.Column="1"
                DisplayMode="Inline"
                OpenPaneLength="296">
                <SplitView.IsPaneOpen>
                    <MultiBinding Converter="{x:Static BoolConverters.Or}">
                        <Binding Source="{ResolveByName RadioButton1}" Path="IsChecked" />
                        <Binding Source="{ResolveByName RadioButton2}" Path="IsChecked" />
                        <Binding Source="{ResolveByName RadioButton3}" Path="IsChecked" />
                    </MultiBinding>
                </SplitView.IsPaneOpen>
                <SplitView.Pane>
                    <userControls:MyTagsView />
                </SplitView.Pane>

                <userControls:MainPanel />
            </SplitView>
        </Grid>
    </Grid>
</Window>
